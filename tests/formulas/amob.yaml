- name: Test 01 - Vérifie le calcul de l'AMOB pour un individu avec une allocation = ARE min hors Mayotte et allocation > ARE min hors Mayotte
  period: 2021-12
  input:
    residence: [metropole, metropole]
    age: [29, 29]
    distance_aller_retour_activite_domicile: [61, 61]
    nombre_allers_retours: [1, 1]
    aide_mobilite_duree_trajet: [120, 120]
    nuitees: [3, 3]
    repas: [9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1]
    stagiaire: [False, False]
    en_contrat_aide: [False, False]
    allocation_retour_emploi: [29.56, 29.57]
    contexte_activite_pole_emploi: [recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [concours_public, concours_public]
    types_contrat: [aucune_activite, aucune_activite]
    contrat_de_travail_duree: [null, null]
    lieu_emploi_ou_formation: [metropole, martinique]
    formation_validee_par_PoleEmploi: [null, null]
    formation_financee_ou_cofinancee: [null, null]
    contrat_de_travail_debut: [null, null]
    date_debut_type_activite_en_recherche_emploi: ['2021-01-08', '2021-01-08']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-14']
    aide_mobilite_montant_percu_12_derniers_mois: [0, 0]
  output:
    aide_mobilite_eligible: [True, False]
    aide_mobilite: [156.2, 0]


- name: Test 02 - Vérifie le calcul de l'AMOB pour un individu avec une catégorie 4 stagiaire de formation professionnelle / ou non
  period: 2021-12
  input:
    residence: [martinique, martinique]
    age: [29, 29]
    distance_aller_retour_activite_domicile: [21, 21]
    nombre_allers_retours: [1, 1]
    aide_mobilite_duree_trajet: [120, 120]
    nuitees: [3, 3]
    repas: [9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_4, categorie_4]
    stagiaire: [True, False]
    en_contrat_aide: [False, False]
    allocation_retour_emploi: [14.77, 14.77]
    contexte_activite_pole_emploi: [recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [concours_public, concours_public]
    types_contrat: [aucune_activite, aucune_activite]
    contrat_de_travail_duree: [0, 0]
    lieu_emploi_ou_formation: [la_reunion, guyane]
    formation_validee_par_PoleEmploi: [True, True]
    formation_financee_ou_cofinancee: [True, True]
    contrat_de_travail_debut: ['', '']
    date_debut_type_activite_en_recherche_emploi: ['2021-01-08', '2021-01-08']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-14']
    aide_mobilite_montant_percu_12_derniers_mois: [0, 0]
  output:
    aide_mobilite_eligible: [True, False]
    aide_mobilite: [148.2, 0]

- name: Test 03 - Vérifie le calcul de l'AMOB pour un individu avec une catégorie 5 contrat aidé / ou non
  period: 2021-12
  input:
    residence: [martinique, martinique]
    age: [29, 29]
    distance_aller_retour_activite_domicile: [21, 21]
    nombre_allers_retours: [1, 1]
    aide_mobilite_duree_trajet: [120, 120]
    nuitees: [3, 3]
    repas: [9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_5, categorie_5]
    stagiaire: [False, False]
    en_contrat_aide: [True, False]
    allocation_retour_emploi: [14.77, 14.77]
    contexte_activite_pole_emploi: [recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [concours_public, concours_public]
    types_contrat: [aucune_activite, aucune_activite]
    contrat_de_travail_duree: [0, 0]
    lieu_emploi_ou_formation: [guadeloupe, saint_martin]
    formation_validee_par_PoleEmploi: [True, True]
    formation_financee_ou_cofinancee: [True, True]
    contrat_de_travail_debut: ['', '']
    date_debut_type_activite_en_recherche_emploi: ['2021-01-08', '2021-01-08']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-14']
    aide_mobilite_montant_percu_12_derniers_mois: [0, 0]
  output:
    aide_mobilite_eligible: [True, False]
    aide_mobilite: [148.2, 0]


- name: Test 04 - Vérifie le calcul de l'AMOB pour un individu avec une catégorie non éligible
  period: 2021-12
  input:
    residence: martinique
    age: 29
    distance_aller_retour_activite_domicile: 21
    nombre_allers_retours: 1
    aide_mobilite_duree_trajet: 120
    nuitees: 3
    repas: 9
    pole_emploi_categorie_demandeur_emploi: categorie_test
    stagiaire: False
    en_contrat_aide: False
    allocation_retour_emploi: 14.77
    contexte_activite_pole_emploi: recherche_emploi
    types_activite_en_recherche_emploi: concours_public
    types_contrat: aucune_activite
    contrat_de_travail_duree: 0
    lieu_emploi_ou_formation: saint_bartelemy
    formation_validee_par_PoleEmploi: True
    formation_financee_ou_cofinancee: True
    contrat_de_travail_debut: ''
    date_debut_type_activite_en_recherche_emploi: '2021-01-08'
    aide_mobilite_date_demande: '2021-01-14'
    aide_mobilite_montant_percu_12_derniers_mois: 0
  output:
    aide_mobilite_eligible: False
    aide_mobilite: 0


- name: Test 05 - Calcul AMOB en contexte recherche d'emploi avec un demande au 7ème jour et 8ème jour
  period: 2021-12
  input:
    residence: [martinique, martinique]
    age: [29, 29]
    distance_aller_retour_activite_domicile: [21, 21]
    nombre_allers_retours: [1, 1]
    aide_mobilite_duree_trajet: [120, 120]
    nuitees: [3, 3]
    repas: [9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1]
    stagiaire: [False, False]
    en_contrat_aide: [False, False]
    allocation_retour_emploi: [14.77, 14.77]
    contexte_activite_pole_emploi: [recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [concours_public, concours_public]
    types_contrat: [aucune_activite, aucune_activite]
    contrat_de_travail_duree: [0, 0]
    lieu_emploi_ou_formation: [mayotte, france_hors_corse]
    formation_validee_par_PoleEmploi: [True, True]
    formation_financee_ou_cofinancee: [True, True]
    contrat_de_travail_debut: ['', '']
    date_debut_type_activite_en_recherche_emploi: ['2021-01-08', '2021-01-08']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-15']
    aide_mobilite_montant_percu_12_derniers_mois: [0, 0]
  output:
    aide_mobilite_eligible: [True, False]
    aide_mobilite: [148.2, 0]


- name: Test 06 - Calcul AMOB montant (148.2€) -> réel (48.2€) car aide restante de 100€ avec 4900€ déjà touchés (Plafond Max = 5000€ sur une année glissante)
  period: 2021-12
  input:
    residence: [martinique, martinique]
    age: [29, 29]
    distance_aller_retour_activite_domicile: [21, 21]
    nombre_allers_retours: [1, 1]
    aide_mobilite_duree_trajet: [120, 120]
    nuitees: [3, 3]
    repas: [9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1]
    stagiaire: [False, False]
    en_contrat_aide: [False, False]
    allocation_retour_emploi: [14.77, 14.77]
    contexte_activite_pole_emploi: [recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [concours_public, concours_public]
    types_contrat: [aucune_activite, aucune_activite]
    contrat_de_travail_duree: [0, 0]
    lieu_emploi_ou_formation: [metropole, metropole]
    formation_validee_par_PoleEmploi: [True, True]
    formation_financee_ou_cofinancee: [True, True]
    contrat_de_travail_debut: ['', '']
    date_debut_type_activite_en_recherche_emploi: ['2021-01-08', '2021-01-08']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-14']
    aide_mobilite_montant_percu_12_derniers_mois: [4900, 4000]
  output:
    aide_mobilite_eligible: [True, True]
    aide_mobilite: [100, 148.2]


- name: Test 07 - Calcul AMOB en fonction de différentes formations et durées
  period: 2021-12
  input:
    residence: [martinique, martinique, martinique]
    age: [29, 29, 29]
    distance_aller_retour_activite_domicile: [21, 21, 21]
    nombre_allers_retours: [1, 1, 1]
    aide_mobilite_duree_trajet: [120, 120, 120]
    nuitees: [3, 3, 3]
    repas: [9, 9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1, categorie_1]
    stagiaire: [False, False, False]
    en_contrat_aide: [False, False, False]
    allocation_retour_emploi: [14.77, 14.77, 14.77]
    contexte_activite_pole_emploi: [formation, formation, formation]
    types_activite_en_recherche_emploi: [indetermine, indetermine, indetermine]
    types_contrat: [formation, formation, formation]
    dispositifs_formation: [permis_conduire_b, autre, autre]
    contrat_de_travail_duree: [0, 0, 0]
    heures_remunerees_volume: [40, 40, 39]
    lieu_emploi_ou_formation: [metropole, metropole, metropole]
    formation_validee_par_PoleEmploi: [True, True, True]
    formation_financee_ou_cofinancee: [True, True, True]
    contrat_de_travail_debut: ['2021-01-08', '2021-01-08', '2021-01-15']
    date_debut_type_activite_en_recherche_emploi: ['', '', '']
    aide_mobilite_date_demande: ['2021-01-14', '2021-01-14', '2021-01-14']
    aide_mobilite_montant_percu_12_derniers_mois: [5000, 4000, 4000]
  output:
    aide_mobilite_eligible: [False, True, False]
    aide_mobilite: [0, 148.2, 0]


- name: Test 08 - Calcul AMOB en fonction de la date de demande (reprise/recherche) - (1 mois / 7 jours)
  period: 2021-12
  input:
    residence: [martinique, martinique, martinique, martinique]
    age: [29, 29, 29, 29]
    distance_aller_retour_activite_domicile: [21, 21, 21, 21]
    nombre_allers_retours: [1, 1, 1, 1]
    aide_mobilite_duree_trajet: [120, 120, 120, 120]
    nuitees: [3, 3, 3, 3]
    repas: [9, 9, 9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1, categorie_1, categorie_1]
    stagiaire: [False, False, False, False]
    en_contrat_aide: [False, False, False, False]
    allocation_retour_emploi: [14.77, 14.77, 14.77, 14.77]
    contexte_activite_pole_emploi: [reprise_emploi, reprise_emploi, recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [indetermine, indetermine, concours_public, concours_public]
    types_contrat: [cdi, cdi, aucun, aucun]
    dispositifs_formation: [autre, autre, autre, autre]
    contrat_de_travail_duree: [0, 0, 0, 0]
    heures_remunerees_volume: [0, 0, 0, 0]
    lieu_emploi_ou_formation: [metropole, metropole, metropole, metropole]
    formation_validee_par_PoleEmploi: [True, True, True, True]
    formation_financee_ou_cofinancee: [True, True, True, True]
    contrat_de_travail_debut: ['2021-01-02', '2021-01-01', '', '']
    date_debut_type_activite_en_recherche_emploi: ['', '', '2021-01-01', '2021-01-01']
    aide_mobilite_date_demande: ['2021-01-01', '2021-02-02', '2021-01-07', '2021-01-08']
    aide_mobilite_montant_percu_12_derniers_mois: [4000, 4000, 4900, 4000]
  output:
    aide_mobilite_eligible: [True, False, True, False]
    aide_mobilite: [148.2, 0, 100, 0]


- name: Test 09 - Calcul AMOB
  period: 2021-12
  input:
    residence: [martinique, martinique, metropole, martinique]
    age: [29, 29, 29, 29]
    distance_aller_retour_activite_domicile: [21, 21, 61, 21]
    nombre_allers_retours: [1, 1, 1, 1]
    aide_mobilite_duree_trajet: [120, 120, 120, 120]
    nuitees: [3, 3, 3, 3]
    repas: [9, 9, 9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1, categorie_5, categorie_1]
    stagiaire: [False, False, False, False]
    en_contrat_aide: [False, False, True, False]
    allocation_retour_emploi: [14.77, 14.77, 29.56, 14.77]
    contexte_activite_pole_emploi: [formation, reprise_emploi, recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [indetermine, indetermine, entretien_embauche, concours_public]
    types_contrat: [formation, cdi, cdd, aucun]
    dispositifs_formation: [autre, autre, autre, autre]
    contrat_de_travail_duree: [0, 0, 3, 0]
    heures_remunerees_volume: [40, 0, 0, 0]
    lieu_emploi_ou_formation: [metropole, metropole, metropole, metropole]
    formation_validee_par_PoleEmploi: [True, True, True, True]
    formation_financee_ou_cofinancee: [True, True, True, True]
    contrat_de_travail_debut: ['2021-01-01', '2021-01-01', '', '']
    date_debut_type_activite_en_recherche_emploi: ['', '', '2021-01-01', '2021-01-01']
    aide_mobilite_date_demande: ['2021-01-15', '2021-02-02', '2021-01-04', '2021-01-09']
    aide_mobilite_montant_percu_12_derniers_mois: [4000, 4000, 4900, 4000]
  output:
    aide_mobilite_eligible: [True, False, True, False]
    aide_mobilite: [148.2, 0, 100, 0]


- name: Test 10 - Calcul AMOB éligibilité bon de transport
  period: 2021-12
  input:
    residence: [martinique, martinique, metropole, metropole]
    age: [29, 29, 29, 29]
    distance_aller_retour_activite_domicile: [21, 21, 61, 21]
    nombre_allers_retours: [1, 1, 1, 1]
    aide_mobilite_duree_trajet: [120, 120, 120, 120]
    nuitees: [3, 3, 3, 3]
    repas: [9, 9, 9, 9]
    pole_emploi_categorie_demandeur_emploi: [categorie_1, categorie_1, categorie_5, categorie_9]
    stagiaire: [False, False, False, False]
    en_contrat_aide: [False, False, True, False]
    allocation_retour_emploi: [14.77, 14.77, 29.56, 34.77]
    contexte_activite_pole_emploi: [formation, reprise_emploi, recherche_emploi, recherche_emploi]
    types_activite_en_recherche_emploi: [indetermine, indetermine, entretien_embauche, concours_public]
    types_contrat: [formation, cdi, cdd, aucun]
    dispositifs_formation: [autre, autre, autre, autre]
    contrat_de_travail_duree: [0, 0, 3, 0]
    heures_remunerees_volume: [40, 0, 0, 0]
    lieu_emploi_ou_formation: [metropole, metropole, metropole, france_hors_dom_corse]
    formation_validee_par_PoleEmploi: [True, True, True, True]
    formation_financee_ou_cofinancee: [True, True, True, True]
    contrat_de_travail_debut: ['2021-01-01', '2021-01-01', '', '']
    date_debut_type_activite_en_recherche_emploi: ['', '', '2021-01-01', '2021-01-01']
    aide_mobilite_date_demande: ['2021-01-14', '2021-02-02', '2021-01-04', '2021-01-04']
  output:
    aide_mobilite_eligible: [True, False, True, False]
    aide_mobilite: [148.2, 0, 156.2, 0]
    aide_mobilite_bon_de_transport: [False, False, False, True]


- name: Test 11 - Vérifie le calcul de l'AMOB - Hors metropole - distance respectée
  period: 2021-12
  input:
    residence: guyane
    distance_aller_retour_activite_domicile: 20.001
    nombre_allers_retours: 5
    aide_mobilite_duree_trajet: null
    nuitees: 5
    repas: 15
    pole_emploi_categorie_demandeur_emploi: categorie_1
    stagiaire: null
    en_contrat_aide: null
    allocation_retour_emploi: 0
    contexte_activite_pole_emploi: reprise_emploi
    types_activite_en_recherche_emploi: null
    types_contrat: cdi
    contrat_de_travail_duree: null
    lieu_emploi_ou_formation: guyane
    formation_validee_par_PoleEmploi: null
    formation_financee_ou_cofinancee: null
    contrat_de_travail_debut: '2021-01-01'
    date_debut_type_activite_en_recherche_emploi: null
    aide_mobilite_date_demande: '2021-01-24'
    aide_mobilite_montant_percu_12_derniers_mois: 0
  output:
    aide_mobilite_eligible: True
#    aide_mobilite: 500.0